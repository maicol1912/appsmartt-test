# Appsmartt Backend - Prueba TÃ©cnica

Backend desarrollado con Node.js, Express, TypeORM y PostgreSQL para la gestiÃ³n de operaciones financieras.

## ğŸš€ CaracterÃ­sticas

- **AutenticaciÃ³n JWT** con middleware de seguridad
- **Operaciones financieras** (compra/venta) con transacciones
- **ValidaciÃ³n robusta** de datos de entrada
- **Arquitectura limpia** (Controller â†’ Service â†’ Repository)
- **Base de datos PostgreSQL** con TypeORM
- **Manejo de errores** centralizado
- **Variables de entorno** para configuraciÃ³n
- **TypeScript** para mayor seguridad de tipos

## ğŸ“ Estructura del Proyecto

```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/          # ConfiguraciÃ³n (DB, JWT)
â”‚   â”œâ”€â”€ controllers/     # Controladores HTTP
â”‚   â”œâ”€â”€ entities/        # Entidades TypeORM
â”‚   â”œâ”€â”€ middlewares/     # Middlewares (Auth)
â”‚   â”œâ”€â”€ repositories/    # Capa de acceso a datos
â”‚   â”œâ”€â”€ routes/          # DefiniciÃ³n de rutas
â”‚   â”œâ”€â”€ services/        # LÃ³gica de negocio
â”‚   â”œâ”€â”€ types/           # Tipos TypeScript
â”‚   â”œâ”€â”€ utils/           # Utilidades (Error handler)
â”‚   â””â”€â”€ app.ts           # ConfiguraciÃ³n Express
â”œâ”€â”€ .env.example         # Ejemplo variables de entorno
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ server.ts            # Punto de entrada
```

## ğŸ› ï¸ InstalaciÃ³n y ConfiguraciÃ³n

### Prerrequisitos
- Node.js (v18 o superior)
- PostgreSQL (v12 o superior)
- npm o yarn

### Pasos de instalaciÃ³n

1. **Clonar el repositorio**
```bash
git clone <url-del-repo>
cd backend
```

2. **Instalar dependencias**
```bash
npm install
```

5. **Ejecutar en desarrollo**
```bash
npm run dev
```

6. **Compilar para producciÃ³n**
```bash
npm run build
npm start
```

## ğŸ“š API Endpoints

### AutenticaciÃ³n

#### POST /api/auth/login
Iniciar sesiÃ³n de usuario
```json
{
  "email": "usuario@ejemplo.com",
  "password": "password123"
}
```

#### POST /api/auth/register
Registrar nuevo usuario
```json
{
  "email": "nuevo@ejemplo.com",
  "password": "Password123",
  "firstName": "Juan",
  "lastName": "PÃ©rez"
}
```

#### GET /api/auth/validate
Validar token JWT (requiere Authorization header)

### Operaciones (Requieren AutenticaciÃ³n)

#### POST /api/operations
Crear nueva operaciÃ³n
```json
{
  "type": "buy", // "buy" o "sell"
  "amount": 1500.50,
  "currency": "USD"
}
```

#### GET /api/operations
Obtener operaciones del usuario
- Query params: `?page=1&limit=10`

#### GET /api/operations/:id
Obtener operaciÃ³n especÃ­fica por ID

## ğŸ”’ Seguridad

- **JWT Authentication**: Tokens seguros con expiraciÃ³n
- **ValidaciÃ³n de datos**: express-validator en todas las rutas
- **Helmet**: Headers de seguridad HTTP
- **CORS**: Configurado para origins especÃ­ficos
- **Transacciones**: Integridad de datos en PostgreSQL
- **Hash de contraseÃ±as**: bcryptjs con salt

## ğŸ—ï¸ Arquitectura

### PatrÃ³n utilizado: Controller â†’ Service â†’ Repository

1. **Controllers**: Manejan HTTP requests/responses y validaciones
2. **Services**: Contienen lÃ³gica de negocio y coordinan repositorios
3. **Repositories**: Acceso a datos y operaciones de base de datos
4. **Middlewares**: AutenticaciÃ³n y validaciones transversales